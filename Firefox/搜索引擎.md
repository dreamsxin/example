## browser\components\preferences\search.js
```js
  async setDefaultEngine() {
    await Services.search.setDefault(
      document.getElementById("defaultEngine").selectedItem.engine,
      Ci.nsISearchService.CHANGE_REASON_USER
    );
    if (ExtensionSettingsStore.getSetting(SEARCH_TYPE, SEARCH_KEY) !== null) {
      ExtensionSettingsStore.select(
        ExtensionSettingsStore.SETTING_USER_SET,
        SEARCH_TYPE,
        SEARCH_KEY
      );
    }
  },
```

## toolkit\components\search\SearchEngineSelector.sys.mjs

## services\settings\dumps\main\search-config-v2.json
- recordType
defaultEngines
```json
{
  "data": [
    {
      "globalDefault": "google",
      "id": "f3891684-2348-4e7a-9765-0c5d2d0ab1b9",
      "last_modified": 1702906502241,
      "recordType": "defaultEngines",
      "schema": 1702901837584,
      "specificDefaults": [
        {
          "default": "baidu",
          "environment": {
            "locales": [
              "zh-CN"
            ],
            "regions": [
              "cn"
            ]
          }
        },
        {
          "default": "baidu",
          "environment": {
            "distributions": [
              "MozillaOnline"
            ]
          }
        },
        {
          "default": "1und1",
          "environment": {
            "distributions": [
              "1und1"
            ]
          }
        },
        {
          "default": "webde",
          "environment": {
            "distributions": [
              "webde"
            ]
          }
        },
        {
          "default": "mailcom",
          "environment": {
            "distributions": [
              "mail.com"
            ]
          }
        },
        {
          "default": "qwant",
          "environment": {
            "distributions": [
              "qwant-001",
              "qwant-002"
            ]
          }
        },
        {
          "default": "gmx-de",
          "environment": {
            "distributions": [
              "gmx"
            ]
          }
        },
        {
          "default": "gmx-en-GB",
          "environment": {
            "distributions": [
              "gmxcouk"
            ]
          }
        },
        {
          "default": "gmx-es",
          "environment": {
            "distributions": [
              "gmxes"
            ]
          }
        },
        {
          "default": "gmx-fr",
          "environment": {
            "distributions": [
              "gmxfr"
            ]
          }
        }
      ]
    },
  ],
  "timestamp": 1722952002241
}
```
## toolkit\components\search\SearchService.sys.mjs
- const SETTINGS_FILENAME = "search.json.mozlz4";
- defaultEngineId
```js

  async setDefaultPrivate(engine, changeSource) {
    await this.init();
    if (!this._separatePrivateDefaultPrefValue) {
      Services.prefs.setBoolPref(
        lazy.SearchUtils.BROWSER_SEARCH_PREF + "separatePrivateDefault",
        true
      );
    }
    this.#setEngineDefault(this.#separatePrivateDefault, engine, changeSource);
  }
```
