## 三次握手

### 使用 tcpdump 抓包
···shell
tcpdump -XAns 4096 -iany port 80
```
- -n 不把主机的网络地址转换成名字
- -t 在每列倾倒资料上不显示时间戳记
- -x 用十六进制字码列出数据包资料
- -i 抓取指定网卡的包
- -c 抓取包的个数

输出
```tcpdump
14:25:55.733153 eth0  In  IP 115.206.121.69.34476 > 172.31.36.243.9004: Flags [S], seq 1097659038, win 65535, options [mss 1452,sackOK,TS val 2198095855 ecr 0,nop,wscale 8], length 0
        0x0000:  4520 003c fe39 4000 2506 993c 73ce 7945  E..<.9@.%..<s.yE
        0x0010:  ac1f 24f3 86ac 232c 416c f29e 0000 0000  ..$...#,Al......
        0x0020:  a002 ffff e109 0000 0204 05ac 0402 080a  ................
        0x0030:  8304 47ef 0000 0000 0103 0308            ..G.........
14:25:55.733182 eth0  Out IP 172.31.36.243.9004 > 115.206.121.69.34476: Flags [S.], seq 3058750161, ack 1097659039, win 62643, options [mss 8961,sackOK,TS val 3663227419 ecr 2198095855,nop,wscale 1], length 0
        0x0000:  4500 003c 0000 4000 4006 7c96 ac1f 24f3  E..<..@.@.|...$.
        0x0010:  73ce 7945 232c 86ac b650 d2d1 416c f29f  s.yE#,...P..Al..
        0x0020:  a012 f4b3 be54 0000 0204 2301 0402 080a  .....T....#.....
        0x0030:  da58 6a1b 8304 47ef 0103 0301            .Xj...G.....
14:25:55.948120 eth0  In  IP 115.206.121.69.34476 > 172.31.36.243.9004: Flags [.], ack 1, win 343, options [nop,nop,TS val 2198096070 ecr 3663227419], length 0
        0x0000:  4520 0034 fe3a 4000 2506 9943 73ce 7945  E..4.:@.%..Cs.yE
        0x0010:  ac1f 24f3 86ac 232c 416c f29f b650 d2d2  ..$...#,Al...P..
        0x0020:  8010 0157 3ff9 0000 0101 080a 8304 48c6  ...W?.........H.
        0x0030:  da58 6a1b                                .Xj.
```
两位16进制的数刚好就是一个字节(二进制数字的8位)组成。
这里数据包共包含60字节，其中前20字节是IP头部，后40字节是TCP头部，不包含应用程序数据（length值为0）。
- F : FIN - 结束; 结束会话
- S : SYN - 同步; 表示开始会话请求
- R : RST - 复位;中断一个连接
- P : PUSH - 推送; 数据包立即发送
- ./A : ACK - 应答

- flags MF表示有更多分片，DF 表示不分片。
